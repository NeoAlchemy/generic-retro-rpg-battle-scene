namespace SpriteKind {
    export const menu_fight_button = SpriteKind.create()
    export const menu_run_button = SpriteKind.create()
    export const cursor = SpriteKind.create()
    export const menu_fight_dino1_button = SpriteKind.create()
    export const Hero = SpriteKind.create()
    export const menu_fight_dino2_button = SpriteKind.create()
}
function destroyFightMenu () {
    if (Dino_1_Status_Bar.value <= 0) {
        sprites.destroy(Dino_1_Button)
    }
    if (Dino_2_Status_Bar.value <= 0) {
        sprites.destroy(Dino_2_Button)
    }
    sprites.destroy(Dino_1_Button)
    sprites.destroy(Dino_2_Button)
}
function createHeroes () {
    Hero = sprites.create(img`
        ...............ff.......
        .............ff2ffff....
        ............ff2feeeeff..
        ...........ff22feeeeeff.
        ...........feeeeffeeeef.
        ..........fe2222eefffff.
        ..........f2effff222efff
        ..........fffeeeffffffff
        ..........fee44fbe44efef
        ...........feddfb4d4eef.
        ..........c.eeddd4eeef..
        ...cccccccceddee2222f...
        ....cdddddcedd44e444f...
        .....cccccc.eeeefffff...
        ..........c...ffffffff..
        ...............ff..fff..
        `, SpriteKind.Hero)
    tiles.placeOnTile(Hero, tiles.getTileLocation(8, 1))
}
sprites.onOverlap(SpriteKind.cursor, SpriteKind.menu_fight_dino1_button, function (sprite, otherSprite) {
    if (controller.A.isPressed()) {
        Dino_1_Status_Bar.value += randint(-20, -30)
        destroyFightMenu()
        pause(200)
        createMenu()
        shakeDino(Dino_1)
        doHeroFightAnimation()
    }
})
function doHeroFightAnimation () {
    animation.runImageAnimation(
    Hero,
    [img`
        ..............ffffff....
        .............f2feeeeff..
        ............f222feeeeff.
        .......cc...feeeeffeeef.
        .......cdc.fe2222eeffff.
        .......cddcf2effff222ef.
        ........cddcffeeefffffff
        .........cddce44fbe44eff
        ..........cdceddf14d4eef
        ..........cccdeddd4eeef.
        ...........edd4e44eeff..
        ............ee442222f...
        .............f2e2222f...
        .............f554444f...
        ..............ffffff....
        ................fff.....
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        `,img`
        ........................
        ..............fff.......
        .............f2fffff....
        ...........ff22eeeeeff..
        ..........ff222eeeeeeff.
        ..........feeeefffeeeef.
        .........fe2222eeefffff.
        .........f2efffff222efff
        ..cc.....fffeeefffffffff
        ..cdcc...fee44fbbe44efef
        ..ccddcc..feddfbb4d4eef.
        ....cdddceefddddd4eeef..
        .....ccdcddee2222222f...
        ......cccdd44e544444f...
        .........eeeeffffffff...
        .............ff...fff...
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        `,img`
        ...............ff.......
        .............ff2ffff....
        ............ff2feeeeff..
        ...........ff22feeeeeff.
        ...........feeeeffeeeef.
        ..........fe2222eefffff.
        ..........f2effff222efff
        ..........fffeeeffffffff
        ..........fee44fbe44efef
        ...........feddfb4d4eef.
        ..........c.eeddd4eeef..
        ....ccccccceddee2222f...
        .....dddddcedd44e444f...
        ......ccccc.eeeefffff...
        ..........c...ffffffff..
        ...............ff..fff..
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        `,img`
        ..............ffffff....
        .............f2feeeeff..
        ............f222feeeeff.
        ............feeeeffeeef.
        ...........fe2222eeffff.
        ...........f2effff222ef.
        ...........fffeeefffffff
        ...........fee44fbe44eff
        ............feddf14d4eef
        .............fdddd4eeef.
        .............fe444eddf..
        .............ccc22eddf..
        .............cdc22fee...
        ............cddc4444f...
        ...........cddcfffff....
        ..........cddc..fff.....
        ..........cdc...........
        ..........cc............
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        `],
    50,
    true
    )
    pause(500)
    animation.stopAnimation(animation.AnimationTypes.All, Hero)
}
sprites.onOverlap(SpriteKind.cursor, SpriteKind.menu_fight_button, function (sprite, otherSprite) {
    if (controller.A.isPressed()) {
        isRun = 0
        isFight = 1
        pause(250)
        createFightMenu()
    }
})
sprites.onOverlap(SpriteKind.cursor, SpriteKind.menu_run_button, function (sprite, otherSprite) {
    if (controller.A.isPressed()) {
        isRun = 1
        isFight = 0
    }
})
function shakeDino (dinoX: Sprite) {
    dinoX.setVelocity(-50, 0)
    pause(100)
    dinoX.setVelocity(0, 0)
    pause(50)
    dinoX.setVelocity(50, 0)
    pause(103)
    dinoX.setVelocity(0, 0)
}
function createEnemies () {
    Dino_1 = sprites.create(img`
        ........................
        ........................
        ...........cc...........
        ...........cccc.........
        .......cc...ccccccc.....
        .......cccccc555555cc...
        ........ccb5555555555c..
        .....cc..b555555555555c.
        .....cccb555555ff155555c
        .....ccb55555555ff55d55c
        ......b5555555555555555c
        ...c..b555d55555bb13bbc.
        ...cccd55ddddd55bb3335c.
        ....cbdddddddddd55b335c.
        ..cccdddddb55bdddd5555c.
        ..cccdddddb555bbbbcccc..
        ...ccddddddb5555cbcdc...
        ccccbdddddddcb55cbcc....
        cddddddddd55dbccbbc.....
        cbdddddddd555dbbbcc.....
        .ccbdddbbdd555bbcdbcc...
        ...cccbbbbdd55ccdddbc...
        ......cccbdddbccccccc...
        ........cdd555dc........
        `, SpriteKind.Enemy)
    tiles.placeOnTile(Dino_1, tiles.getTileLocation(1, 0))
    Dino_1_Status_Bar = statusbars.create(20, 4, StatusBarKind.Health)
    Dino_1_Status_Bar.attachToSprite(Dino_1, -30, 0)
    Dino_1_Status_Bar.value = 100
    Dino_1_Status_Bar.setColor(7, 2)
    Dino_2 = sprites.create(img`
        ........................
        ........................
        ...........cc...........
        ...........cccc.........
        .......cc...ccccccc.....
        .......cccccc555555cc...
        ........ccb5555555555c..
        .....cc..b555555555555c.
        .....cccb555555ff155555c
        .....ccb55555555ff55d55c
        ......b5555555555555555c
        ...c..b555d55555bb13bbc.
        ...cccd55ddddd55bb3335c.
        ....cbdddddddddd55b335c.
        ..cccdddddb55bdddd5555c.
        ..cccdddddb555bbbbcccc..
        ...ccddddddb5555cbcdc...
        ccccbdddddddcb55cbcc....
        cddddddddd55dbccbbc.....
        cbdddddddd555dbbbcc.....
        .ccbdddbbdd555bbcdbcc...
        ...cccbbbbdd55ccdddbc...
        ......cccbdddbccccccc...
        ........cdd555dc........
        `, SpriteKind.Enemy)
    tiles.placeOnTile(Dino_2, tiles.getTileLocation(1, 2))
    Dino_2_Status_Bar = statusbars.create(20, 4, StatusBarKind.Health)
    Dino_2_Status_Bar.attachToSprite(Dino_2, -30, 0)
    Dino_2_Status_Bar.value = 100
    Dino_2_Status_Bar.setColor(7, 2)
}
sprites.onOverlap(SpriteKind.cursor, SpriteKind.menu_fight_dino2_button, function (sprite, otherSprite) {
    if (controller.A.isPressed()) {
        Dino_2_Status_Bar.value += randint(-20, -30)
        destroyFightMenu()
        pause(200)
        createMenu()
        shakeDino(Dino_2)
        doHeroFightAnimation()
    }
})
function createCursor () {
    cursor = sprites.create(img`
        . . . . . . f f f f . . . . . . . 
        . . . . f f f 1 1 f . . . . . . . 
        . . . f f 1 1 1 f f . . . . . . . 
        . f f f 1 1 1 f f f f f f f f f f 
        . f 1 1 1 1 1 1 1 1 1 1 1 1 1 1 f 
        f f 1 1 1 1 1 1 f f f f f f f f f 
        f 1 1 1 1 1 1 1 1 1 1 1 f . . . . 
        f 1 1 1 1 1 1 1 f f f f f . . . . 
        f 1 1 1 1 1 1 1 1 1 1 f . . . . . 
        f f 1 1 1 1 1 f f f f f . . . . . 
        . f f 1 1 1 1 1 1 1 f . . . . . . 
        . . f f f f f f f f f . . . . . . 
        `, SpriteKind.cursor)
    tiles.placeOnTile(cursor, tiles.getTileLocation(7, 5))
    controller.moveSprite(cursor)
}
function createMenu () {
    fight = sprites.create(assets.image`fight`, SpriteKind.menu_fight_button)
    tiles.placeOnTile(fight, tiles.getTileLocation(5, 4))
    run = sprites.create(assets.image`run`, SpriteKind.menu_run_button)
    tiles.placeOnTile(run, tiles.getTileLocation(5, 5))
}
function destroyMenu () {
    sprites.destroy(fight)
    sprites.destroy(run)
}
function createScene () {
    scene.setBackgroundColor(8)
    scene.setBackgroundImage(img`
        ................................................................................................................................................................
        .111111111111111111111111111111111111111111111111111111111111111111111111.1111111111111111111111111111111111111111111111111111111111111111111111111111111111111.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .111111111111111111111111111111111111111111111111111111111111111111111111.1111111111111111111111111111111111111111111111111111111111111111111111111111111111111.
        ................................................................................................................................................................
        .111111111111111111111111111111111111111111111111111111111111111111111111.1111111111111111111111111111111111111111111111111111111111111111111111111111111111111.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .1......................................................................1.1...................................................................................1.
        .111111111111111111111111111111111111111111111111111111111111111111111111.1111111111111111111111111111111111111111111111111111111111111111111111111111111111111.
        ................................................................................................................................................................
        `)
    tiles.setCurrentTilemap(tilemap`level1`)
}
function createFightMenu () {
    if (isFight == 1) {
        destroyMenu()
        Dino_1_Button = sprites.create(img`
            ..................................................
            ..................................................
            ..................................................
            ..................................................
            .11111....11...................11.11...11.........
            .11..11.......................1111111.111.........
            .11...11.111..11111...1111.....11.11...11.........
            .11...11..11..11..11.11..11....11.11...11.........
            .11...11..11..11..11.11..11....11.11...11.........
            .11..11...11..11..11.11..11...1111111..11.........
            .11111...1111.11..11..1111.....11.11..1111........
            ..................................................
            ..................................................
            ..................................................
            ..................................................
            ..................................................
            `, SpriteKind.menu_fight_dino1_button)
        tiles.placeOnTile(Dino_1_Button, tiles.getTileLocation(6, 4))
        Dino_2_Button = sprites.create(img`
            ..................................................
            ..................................................
            ..................................................
            ..................................................
            .11111....11...................11.11...11111......
            .11..11.......................1111111.11...11.....
            .11...11.111..11111...1111.....11.11......111.....
            .11...11..11..11..11.11..11....11.11....1111......
            .11...11..11..11..11.11..11....11.11...1111.......
            .11..11...11..11..11.11..11...1111111.111.........
            .11111...1111.11..11..1111.....11.11..1111111.....
            ..................................................
            ..................................................
            ..................................................
            ..................................................
            ..................................................
            `, SpriteKind.menu_fight_dino2_button)
        tiles.placeOnTile(Dino_2_Button, tiles.getTileLocation(6, 5))
    }
}
// TODO:
// - Implement run away animation where hero goes to the right off screen
// - Create Magic button on Main Menu and create Magic Menu
// - Give Dinos an attack turn
// - Randomize attack value based on a "20 sided dice". (requires conversation)
// - Create Item button on Main Menu and create Item Menu
// - Decorations at top based on surroundings
// 
// LATER:
// Implement an RPG world
// Genericize Enemies not dino specific
// Resize boxes
// Allow for multiple heros
// Allow for 1 - N enemies
let run: Sprite = null
let fight: Sprite = null
let cursor: Sprite = null
let Dino_2: Sprite = null
let isFight = 0
let isRun = 0
let Dino_1: Sprite = null
let Hero: Sprite = null
let Dino_2_Button: Sprite = null
let Dino_2_Status_Bar: StatusBarSprite = null
let Dino_1_Button: Sprite = null
let Dino_1_Status_Bar: StatusBarSprite = null
createScene()
createCursor()
createMenu()
createEnemies()
createHeroes()
game.onUpdateInterval(50, function () {
    if (Dino_1_Status_Bar.value <= 0) {
        if (Dino_2_Status_Bar.value <= 0) {
            game.gameOver(true)
        }
    }
    if (Dino_1_Status_Bar.value <= 0) {
        sprites.destroy(Dino_1, effects.fire, 500)
    }
    if (Dino_2_Status_Bar.value <= 0) {
        sprites.destroy(Dino_2, effects.fire, 500)
    }
})
